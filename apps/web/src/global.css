/* src/global.css */
@import "tailwindcss";
/* Load Tailwind plugins (Tailwind v4 style) */
@plugin "daisyui";
@plugin "tailwindcss-animate";
/* Include Panda CSS (styled-system) so token variables are available */
@import "../styled-system/styles.css";

/* Global styles (minimal, theme-aware) */
html, body, #root {
  height: 100%;
}
/* Enable CSS View Transitions for page-level animations */
/* Minimal View Transitions for page slides */
/* Ensure the root participates (override any injected resets) */
html { view-transition-name: root !important; }
#content { view-transition-name: page; contain: paint; }

@keyframes vt-in-right { from { transform: translateX(100%); } to { transform: translateX(0); } }
@keyframes vt-out-left { from { transform: translateX(0); } to { transform: translateX(-100%); } }
@keyframes vt-in-left { from { transform: translateX(-100%); } to { transform: translateX(0); } }
@keyframes vt-out-right { from { transform: translateX(0); } to { transform: translateX(100%); } }

/* Slide in from the right when target icon is to the right */
html[data-vt-nav="1"][data-vt-dir="right"]::view-transition-old(page),
html[data-vt-nav="1"][data-vt-dir="right"] ::view-transition-old(page) {
  animation: vt-out-left 420ms cubic-bezier(.22,.9,.37,1) both;
}
html[data-vt-nav="1"][data-vt-dir="right"]::view-transition-new(page),
html[data-vt-nav="1"][data-vt-dir="right"] ::view-transition-new(page) {
  animation: vt-in-right 420ms cubic-bezier(.22,.9,.37,1) both;
}

/* Slide in from the left when target icon is to the left */
html[data-vt-nav="1"][data-vt-dir="left"]::view-transition-old(page),
html[data-vt-nav="1"][data-vt-dir="left"] ::view-transition-old(page) {
  animation: vt-out-right 420ms cubic-bezier(.22,.9,.37,1) both;
}
html[data-vt-nav="1"][data-vt-dir="left"]::view-transition-new(page),
html[data-vt-nav="1"][data-vt-dir="left"] ::view-transition-new(page) {
  animation: vt-in-left 420ms cubic-bezier(.22,.9,.37,1) both;
}

/* Fade effect for profile and logout navigations */
@keyframes vt-new-fade { from { opacity: 0 } to { opacity: 1 } }
@keyframes vt-old-fade { from { opacity: 1 } to { opacity: 0 } }
html[data-vt-effect="fade"]::view-transition-old(page),
html[data-vt-effect="fade"] ::view-transition-old(page) {
  animation: vt-old-fade 280ms ease-out both;
}
html[data-vt-effect="fade"]::view-transition-new(page),
html[data-vt-effect="fade"] ::view-transition-new(page) {
  animation: vt-new-fade 320ms ease-out both;
}

/* Hide incoming login DOM while VT is running to prevent pre-flash */
html[data-vt-target="login"][data-vt-nav="1"] #login-root { visibility: hidden !important; opacity: 0 !important; }

/* Disable UA root cross-fade during nav slides; animate only page */
html[data-vt-nav="1"]::view-transition-old(root),
html[data-vt-nav="1"]::view-transition-new(root) {
  animation: none !important;
  mix-blend-mode: normal;
}

/* Fallback CSS removed; pure View Transitions mode */
body {
  margin: 0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
/* Enforce pure black + white in OLED theme for guaranteed contrast */
html[data-theme='dark'], html[data-theme='oled'] { color-scheme: dark; }
html[data-theme='light'], html[data-theme='white'] { color-scheme: light; }
html[data-theme='dark'] body, html[data-theme='oled'] body { background-color: #000; color: #fff; }
html[data-theme='dark'] .oled-glass, html[data-theme='oled'] .oled-glass { background-color: #000 !important; backdrop-filter: none !important; }

::selection {
  background: color-mix(in oklab, #C7B7FF 35%, black);
  color: #000;
}

/* Improve selection contrast per theme:
   - Light theme: selection uses a dark translucent overlay and light text for readability.
   - Dark/OLED themes: selection uses the existing tint but ensure text remains light.
*/
html[data-theme='light'] ::selection,
html[data-theme='white'] ::selection {
  background: rgba(0,0,0,0.75);
  color: #fff;
}

html[data-theme='dark'] ::selection,
html[data-theme='oled'] ::selection {
  background: color-mix(in oklab, #C7B7FF 35%, black);
  color: #fff;
}

/* Theme icon flicker fix: hide inactive icon based on theme at first paint */
html[data-theme='dark'] .theme-icon-sun, html[data-theme='oled'] .theme-icon-sun { display: none; }
html[data-theme='light'] .theme-icon-moon, html[data-theme='white'] .theme-icon-moon { display: none; }

/* Light theme background: moving pastel flow behind acrylic panels */
@keyframes pastel-spin {
  0% { transform: rotate(0turn) scale(1.25); }
  100% { transform: rotate(1turn) scale(1.25); }
}

html[data-theme='light'] body::before, html[data-theme='white'] body::before {
  content: "";
  position: fixed;
  inset: -15vh -15vw;
  pointer-events: none;
  background: conic-gradient(
      from 180deg at 50% 50%,
      rgba(199,183,255,0.35),
      rgba(183,224,255,0.35),
      rgba(191,255,224,0.35),
      rgba(255,214,183,0.35),
      rgba(255,192,225,0.35),
      rgba(199, 183, 255, 0.726)
    );
  filter: blur(80px) saturate(1.15);
  opacity: 0.55;
  transform: translateZ(0);
  animation: pastel-spin 42s linear infinite;
}

@media (prefers-reduced-motion: reduce) {
  html[data-theme='light'] body::before, html[data-theme='white'] body::before { animation: none; }
}

/* Page slide transition using the View Transitions API */
/* Seamless viewport-like slide between pages */
@keyframes vt-in-right { from { transform: translateX(100%); } to { transform: translateX(0); } }
@keyframes vt-out-left { from { transform: translateX(0); } to { transform: translateX(-100%); } }
@keyframes vt-in-left { from { transform: translateX(-100%); } to { transform: translateX(0); } }
@keyframes vt-out-right { from { transform: translateX(0); } to { transform: translateX(100%); } }
/* Auth-specific vertical slides */
@keyframes vt-in-up { from { transform: translateY(100%); } to { transform: translateY(0); } }
@keyframes vt-out-down { from { transform: translateY(0); } to { transform: translateY(100%); } }
@keyframes vt-in-down { from { transform: translateY(-100%); } to { transform: translateY(0); } }
@keyframes vt-out-up { from { transform: translateY(0); } to { transform: translateY(-100%); } }
@keyframes vt-fade-out { from { opacity: 1; } to { opacity: 0; } }
/* Sequential fade: old fades out first half, new fades in second half */
@keyframes vt-old-seq-fade { 0%, 49.9% { opacity: 1 } 50%, 100% { opacity: 0 } }
@keyframes vt-new-seq-fade { 0%, 50% { opacity: 0 } 100% { opacity: 1 } }
/* Helper class for pre-fading the auth container before VT starts */
.auth-fade-out { animation: vt-fade-out 300ms ease-out forwards; }
/* View Transition rules removed */
/* View Transition rules removed */

/* Content visibility utility: hides rendering work for offscreen sections until scrolled near.
   Provide a reasonable intrinsic size to avoid layout shifts when it becomes visible. */
.cv-auto { content-visibility: auto; contain-intrinsic-size: 1px 800px; }

/* Acrylic glass utility (Windows 11-like) */
.acrylic {
  backdrop-filter: blur(14px) saturate(1.35);
  -webkit-backdrop-filter: blur(14px) saturate(1.35);
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(255,255,255,0.35);
  box-shadow: 0 1px 0 rgba(255,255,255,0.6) inset, 0 10px 35px rgba(0,0,0,0.06);
}

/* Ensure readable text on acrylic surfaces in both themes */
.bottom-nav { color: var(--fallback-bc, oklch(var(--bc)/1)); }
.bottom-nav-surface {
  position: relative;
  isolation: isolate; /* create local stacking context so ::before sits under content */
  border-radius: 16px;
  border: 1px solid transparent; /* soften edge definition */
  backdrop-filter: blur(14px) saturate(1.25);
  -webkit-backdrop-filter: blur(14px) saturate(1.25);
  will-change: backdrop-filter;
}
/* Theme surfaces with subtle translucency */
html[data-theme='dark'] .bottom-nav-surface, html[data-theme='oled'] .bottom-nav-surface {
  /* Remove purple fill; keep subtle edge and depth */
  background: transparent;
  border-color: rgba(255,255,255,0.10);
  box-shadow: 0 6px 20px rgba(0,0,0,0.35);
}
html[data-theme='light'] .bottom-nav-surface, html[data-theme='white'] .bottom-nav-surface {
  /* Neutral glass â€” rely on external blur underlay for coloration */
  background: transparent;
  border-color: rgba(0,0,0,0.08);
  box-shadow: 0 8px 28px rgba(0,0,0,0.06);
}
/* Soft halo that diffuses the edges into the background */
.bottom-nav-surface::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  display: none; /* external underlay handles acrylic blur */
  /* Feather the outside edges only */
  -webkit-mask-image: radial-gradient(closest-side at 50% 50%, black 58%, transparent 100%);
  mask-image: radial-gradient(closest-side at 50% 50%, black 58%, transparent 100%);
  opacity: .85;
  z-index: 0;
  pointer-events: none;
}

/* Tune feather strength per theme: lighter in light mode to avoid solid look */
html[data-theme='light'] .bottom-nav-surface::before,
html[data-theme='white'] .bottom-nav-surface::before { opacity: .55; }
html[data-theme='dark'] .bottom-nav-surface::before,
html[data-theme='oled'] .bottom-nav-surface::before { opacity: .85; }

/* Normalize H1 font-size inside sectioning content to avoid UA changes.
   Headings inside article/aside/nav/section/main should have an explicit size. */
article h1, aside h1, nav h1, section h1, main h1 { font-size: 1.5rem; line-height: 1.25; }

/* Prefer true backdrop blur when supported */
@supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
  html[data-theme='dark'] .bottom-nav-surface, html[data-theme='oled'] .bottom-nav-surface {
    background: transparent;
    box-shadow: 0 10px 30px rgba(0,0,0,0.18);
  }
  html[data-theme='light'] .bottom-nav-surface, html[data-theme='white'] .bottom-nav-surface {
    background: transparent;
    box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  }
}

/* Ensure nav content sits above the feather layer */
.bottom-nav-surface > ul { position: relative; z-index: 1; }

/* Keep the bottom navigation visually on top during view transitions.
   Some browsers render view-transition snapshots above fixed elements.
   Use sticky positioning inside an isolated stacking context so the nav
   visually stays on top while allowing page layout to flow (better with VT).
   We still use a very high z-index to reduce the chance snapshots overlay it. */
.bottom-nav {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 100000 !important;
  pointer-events: auto;
  /* Avoid isolating stacking context so backdrop-filter can sample page content */
  will-change: transform, opacity;
  transition: transform 220ms cubic-bezier(.2,.6,.2,1), opacity 160ms ease;
  width: 100%;
}

.bottom-nav.is-hidden {
  transform: translateY(110%);
  opacity: 0;
  pointer-events: none;
}

/* Subtle backdrop blur underneath the nav (blurs page content behind it) */
.bottom-nav::before {
  content: "";
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: 96px; /* extend a bit above the nav for a soft blend */
  pointer-events: none;
  z-index: 0; /* stays beneath nav content but above page */
  backdrop-filter: blur(8px) saturate(1.05);
  -webkit-backdrop-filter: blur(8px) saturate(1.05);
  /* a touch of tint helps the blur read, and is required by Safari */
  background: linear-gradient(to top, rgba(255,255,255,0.38) 0%, rgba(255,255,255,0.22) 70%, rgba(255,255,255,0) 100%);
}
html[data-theme='dark'] .bottom-nav::before,
html[data-theme='oled'] .bottom-nav::before {
  background: linear-gradient(to top, rgba(10,10,10,0.45) 0%, rgba(10,10,10,0.20) 70%, rgba(10,10,10,0) 100%);
}

/* View overlay blur under the nav, above page content
   - Fixed to viewport bottom, extends upward with a soft fade
   - Sits behind nav content (z:0) while nav content is higher (z >= 1)
*/
.bottom-nav .bottom-nav-surface { position: relative; z-index: 1; }
.bottom-nav .bottom-nav-surface > * { position: relative; z-index: 2; }

/* Sliding selector that highlights the active nav item.
   It's positioned inside the UL and animated via transform/width.
   It sits below the icons (z-index: 0) while nav items are promoted above. */
.bottom-nav-selector {
  position: absolute;
  top: 50%;
  left: 0;
  height: 40px;
  border-radius: 12px;
  /* Lavender frosted pill with light transparency and subtle blur for depth */
  background: linear-gradient(135deg, rgba(199,183,255,0.36), rgba(164,130,255,0.24));
  -webkit-backdrop-filter: blur(6px) saturate(1.05);
  backdrop-filter: blur(6px) saturate(1.05);
  /* Animate horizontal movement for smooth sliding effect (avoid width transition to reduce delay) */
  transition: transform 180ms cubic-bezier(.2,.6,.2,1), opacity 120ms ease;
  will-change: transform, opacity;
  transform: translateX(0) translateY(-50%);
  width: 0;
  opacity: 0;
  z-index: 0;
  pointer-events: none;
}

.bottom-nav a { color: var(--fallback-bc, oklch(var(--bc)/1)); }
.bottom-nav a[aria-current="page"] { color: var(--fallback-bc, oklch(var(--bc)/1)); }

/* Ensure no duplicate "active" background/outline shows under icons.
   The sliding purple selector is the single active indicator; remove other
   backgrounds, box-shadow, outlines and pseudo-elements for nav items. */
.bottom-nav a.nav-link[aria-current="page"],
.bottom-nav .nav-item.is-active {
  background: transparent !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Remove potential pseudo-element highlights coming from component styles */
.bottom-nav a.nav-link::before,
.bottom-nav a.nav-link::after {
  display: none !important;
  content: none !important;
}

/* Suppress focus rings for nav icons (we rely on accessible focus elsewhere if needed) */
.bottom-nav a.nav-link:focus,
.bottom-nav a.nav-link:focus-visible,
.bottom-nav .nav-item:focus,
.bottom-nav .nav-item:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Robust mobile-friendly colors (avoid oklch dependency) */
html[data-theme='dark'] .bottom-nav, html[data-theme='oled'] .bottom-nav { color: #ffffff; }
html[data-theme='light'] .bottom-nav, html[data-theme='white'] .bottom-nav { color: #111111; }
.bottom-nav .nav-link { color: inherit; opacity: .85; }
.bottom-nav .nav-link:hover { opacity: 1; }
html[data-theme='dark'] .bottom-nav .nav-link.is-active, html[data-theme='oled'] .bottom-nav .nav-link.is-active { background: transparent; color: inherit; }
html[data-theme='light'] .bottom-nav .nav-link.is-active, html[data-theme='white'] .bottom-nav .nav-link.is-active { background: transparent; color: inherit; }
.bottom-nav .btn-ghost { color: inherit !important; }

/* Stronger rules for mobile browsers to ensure icons/text inherit theme color */
html[data-theme='dark'] .bottom-nav .nav-link,
html[data-theme='dark'] .bottom-nav a.nav-link:link,
html[data-theme='dark'] .bottom-nav a.nav-link:visited { color: #fff !important; -webkit-text-fill-color: #fff; }
html[data-theme='light'] .bottom-nav .nav-link,
html[data-theme='light'] .bottom-nav a.nav-link:link,
html[data-theme='light'] .bottom-nav a.nav-link:visited { color: #111 !important; -webkit-text-fill-color: #111; }
.bottom-nav .nav-link [class^="i-"],
.bottom-nav .nav-link [class*=" i-"] { color: inherit !important; }

/* Uniform hit targets and backgrounds for nav items */
.bottom-nav .nav-item {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px; /* consistent touch target */
  height: 48px;
  border-radius: 12px;
  transition: background-color .2s ease, color .2s ease, opacity .2s ease;
  position: relative; /* ensure nav items render above the selector */
  z-index: 2;
}
.bottom-nav .nav-item:hover { opacity: 1; }
html[data-theme='dark'] .bottom-nav .nav-item.is-active,
html[data-theme='oled'] .bottom-nav .nav-item.is-active { background: transparent; }
html[data-theme='light'] .bottom-nav .nav-item.is-active,
html[data-theme='white'] .bottom-nav .nav-item.is-active { background: transparent; }
.bottom-nav .nav-item.is-active {
  pointer-events: none; /* disable clicking when already on page */
  cursor: default;
}

/* Subtle divider between page icons and toggles */
.bottom-nav .nav-sep {
  width: 1px;
  height: 28px;
  margin: 0 6px;
  border-radius: 1px;
  background: currentColor;
  opacity: .18;
}
html[data-theme='dark'] .bottom-nav .nav-sep, html[data-theme='oled'] .bottom-nav .nav-sep { opacity: .22; }
html[data-theme='light'] .bottom-nav .nav-sep, html[data-theme='white'] .bottom-nav .nav-sep { opacity: .18; }

/* Auth UI polish */
.pill-input {
  border-radius: 9999px;
  border: 1px solid #D6BCFA; /* light purple border */
  background: #E9D5FF;       /* flat base; let shadows create the recess */
  padding: 0.85rem 1rem;
  color: #1a1a1a;            /* readable on light bg */
  outline: none;
  /* recessed look: stronger inner shadow, minimal highlights */
  box-shadow:
    inset 0 2px 10px rgba(0,0,0,.16),
    inset 0 -1px 4px rgba(0,0,0,.10);
  transition: border-color .2s ease, box-shadow .2s ease, transform .15s ease, background-color .2s ease, background .2s ease;
}

/* Viewport scroll fade edges for top and bottom
   - Apply to the main content container to subtly fade content near edges
   - Uses CSS mask so interactive elements remain clickable
*/
/* Remove mask-based edge fades to avoid scrollbar interaction issues */
#content.edge-fades { position: relative; min-height: 100vh; }

/* Overlay-based scroll fades (do not affect scrollbar rendering) */
.viewport-fade {
  position: fixed;
  left: 0; right: 0;
  pointer-events: none;
  z-index: 99990; /* below bottom-nav (100000), above content */
  /* default background (light) */
  --page-bg: #ffffff;
}
.viewport-fade.top { top: 0; height: 48px; background: linear-gradient(to bottom, var(--page-bg) 0%, rgba(255,255,255,0) 100%); }
.viewport-fade.bottom { bottom: 0; height: 64px; background: linear-gradient(to top, var(--page-bg) 0%, rgba(255,255,255,0) 100%); }

/* Theme tuning for overlay fades */
html[data-theme='dark'] .viewport-fade, html[data-theme='oled'] .viewport-fade { --page-bg: #0b0b0b; }
html[data-theme='light'] .viewport-fade, html[data-theme='white'] .viewport-fade { --page-bg: #ffffff; }
.pill-input::placeholder{ color: rgba(0,0,0,.45); }
.pill-input:hover {
  box-shadow:
    inset 0 3px 12px rgba(0,0,0,.18),
    inset 0 -2px 6px rgba(0,0,0,.12);
}
.pill-input:focus{
  border-color: #A78BFA;              /* violet-400 */
  box-shadow:
    inset 0 3px 14px rgba(0,0,0,.2),
    inset 0 -3px 8px rgba(0,0,0,.14),
    0 0 0 2px rgba(167,139,250,.22);  /* subtle outer focus ring without lift */
}

/* When an input is in error/warn state and has Tailwind/DaisyUI utilities, ensure they win */
.pill-input.text-error { color: var(--fallback-er, oklch(var(--er)/1)); }
.pill-input.text-error::placeholder { color: color-mix(in oklab, currentColor 55%, transparent); }
.pill-input.text-warning { color: var(--fallback-wa, oklch(var(--wa)/1)); }
.pill-input.text-warning::placeholder { color: color-mix(in oklab, currentColor 55%, transparent); }

/* Error variant: switch purple pill to red tones when invalid */
/* Warning variant: switch purple pill to yellow tones when invalid */
.pill-input.is-warning {
  border-color: #FCD34D;              /* amber-300 */
  background: #FEF3C7;                /* amber-100 */
  color: var(--fallback-wa, oklch(var(--wa)/1));
  box-shadow:
    inset 0 3px 14px rgba(0,0,0,.12),
    inset 0 -3px 8px rgba(0,0,0,.08);
}
.pill-input.is-warning:focus{
  border-color: #FBBF24;              /* amber-400 */
  box-shadow:
    inset 0 3px 16px rgba(0,0,0,.14),
    inset 0 -3px 9px rgba(0,0,0,.10),
    0 0 0 2px rgba(251,191,36,.24);   /* soft yellow focus ring */
}

.btn-cta {
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 9999px; height: 44px; padding: 0 1.1rem;
  background: #fff; color: #000; font-weight: 600;
  box-shadow: 0 10px 25px -10px rgba(255,255,255,.35), 0 1px 0 rgba(0,0,0,.4) inset;
  transition: transform .15s ease, box-shadow .2s ease;
}
.btn-cta:hover{ transform: translateY(-1px); box-shadow: 0 12px 28px -12px rgba(255,255,255,.45), 0 1px 0 rgba(0,0,0,.4) inset; }
.btn-cta:active{ transform: translateY(0); }

.btn-social {
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 9999px; height: 44px; padding: 0 1rem;
  font-weight: 600;
  transition: transform .12s ease, box-shadow .2s ease, background-color .2s ease, background .2s ease, color .2s ease;
  outline: none;
}
.btn-social:hover { transform: translateY(-1px); }
.btn-social:active { transform: translateY(0); }

/* Google variant: white recessed pill */
.btn-social.btn-google {
  background: #ffffff;
  color: #1a1a1a;
  border: 1px solid #E5E7EB; /* gray-200 */
  box-shadow:
    inset 0 2px 10px rgba(0,0,0,.10),
    inset 0 -1px 4px rgba(0,0,0,.06);
}
.btn-social.btn-google:hover {
  box-shadow:
    inset 0 3px 12px rgba(0,0,0,.12),
    inset 0 -2px 6px rgba(0,0,0,.08);
}
.btn-social.btn-google:focus-visible {
  box-shadow:
    inset 0 3px 14px rgba(0,0,0,.14),
    inset 0 -3px 8px rgba(0,0,0,.10),
    0 0 0 2px rgba(59,130,246,.22); /* blue-ish focus ring for visibility */
}

/* Facebook variant: light brand blue recessed pill */
.btn-social.btn-facebook {
  background: #DBEAFE;            /* blue-200 */
  color: #0f172a;                 /* slate-900 for contrast */
  border: 1px solid #93C5FD;      /* blue-300 */
  box-shadow:
    inset 0 2px 10px rgba(0,0,0,.12),
    inset 0 -1px 4px rgba(0,0,0,.08);
}
.btn-social.btn-facebook:hover {
  box-shadow:
    inset 0 3px 12px rgba(0,0,0,.14),
    inset 0 -2px 6px rgba(0,0,0,.10);
}
.btn-social.btn-facebook:focus-visible {
  box-shadow:
    inset 0 3px 14px rgba(0,0,0,.16),
    inset 0 -3px 8px rgba(0,0,0,.12),
    0 0 0 2px rgba(96,165,250,.28);  /* blue-400 focus ring */
}

/* Typewriter caret (underline) */
@keyframes caret-blink { 0%, 49% { opacity: 1 } 50%, 100% { opacity: 0 } }
.type-caret {
  display: inline-block;
  width: 0.9ch;              /* compact underscore width */
  height: 0.08em;           /* thin underline height */
  margin-left: 0;           /* flush against last character */
  border-bottom: 0.1em solid currentColor; /* scales with font size */
  opacity: .95;
  vertical-align: -0.12em;  /* align right at baseline next to text */
}
.type-caret.blink { animation: caret-blink 0.8s steps(1,end) infinite !important; }

/* Lightweight CSS reveal for simple tiles â€” progressive enhancement with scroll-timeline */
.reveal {
  opacity: 0;
  transform: translateY(12px);
  transition: opacity 420ms cubic-bezier(.16,.8,.2,1), transform 420ms cubic-bezier(.16,.8,.2,1);
  will-change: transform, opacity;
}
@supports (animation-timeline: scroll()) {
  .reveal {
    opacity: 1; transform: none; transition: none;
    /* animate on page scroll */
    animation: reveal-up both ease-out;
    animation-timeline: scroll(root block);
    animation-range: 0% 100%;
    animation-duration: 1s;
  }
  @keyframes reveal-up { from { opacity: 0; transform: translateY(12px) } to { opacity: 1; transform: translateY(0) } }
}

/* Scroll-driven progress bar â€” progressive enhancement */
@keyframes grow { from { width: 0% } to { width: 100% } }
@supports (animation-timeline: scroll()) {
  .scroll-progress {
    height: 2px;
    position: fixed;
    inset-block-start: 0;
    inset-inline: 0;
    background: transparent;
    z-index: 50;
  }
  .scroll-progress::before {
    content: "";
    display: block;
    height: 100%;
    background: var(--color-accent, currentColor);
    width: 0%;
    animation: grow both linear;
    /* Root page scroll in block direction */
    animation-timeline: scroll(root block);
    animation-range: 0% 100%;
  }
  /* Hide JS fallback bar where CSS enhancement is available */
  .scroll-progress .fallback { display: none; }
}

/* Make DaisyUI inputs in auth panel look like pill inputs without editing JSX */
  .auth-panel .input.input-bordered {
    border-radius: 9999px !important;
    border: 1px solid #D6BCFA !important; /* light purple border */
    background: #E9D5FF !important;
    color: #1a1a1a !important;
    box-shadow:
    inset 0 2px 10px rgba(0,0,0,.16),
    inset 0 -1px 4px rgba(0,0,0,.10) !important;
  }
  .auth-panel .input.input-bordered:focus {
    outline: none !important;
    border-color: #A78BFA !important;
    box-shadow:
    inset 0 3px 14px rgba(0,0,0,.2),
    inset 0 -3px 8px rgba(0,0,0,.14),
    0 0 0 2px rgba(167,139,250,.22) !important;
  }

/* Below-the-fold decorative panels should not impact initial paint */
.mosaic-panel{
  content-visibility: auto;
  contain-intrinsic-size: auto 800px; /* tune placeholder size to your layout */
  contain: content; /* layout+paint+style isolation */
}

/* Make auth panel acrylic in light theme */
html[data-theme='light'] .auth-panel, html[data-theme='white'] .auth-panel {
  background: rgba(255,255,255,0.55) !important;
  color: #000 !important;
  backdrop-filter: blur(14px) saturate(1.35);
  -webkit-backdrop-filter: blur(14px) saturate(1.35);
  border-color: rgba(255,255,255,0.35) !important;
}

/* Prevent FOUC: hide reveal items at first paint so they don't flash before JS runs */
.auth-panel .reveal-item { opacity: 0; transform: translateY(8px); transition: none !important; }
@media (prefers-reduced-motion: reduce) {
  .auth-panel .reveal-item { opacity: 1 !important; transform: none !important; transition: none !important; }
}

/* Parallel dimensions for login/signup panels */
.auth-panel { display: flex; flex-direction: column; }
.auth-panel .auth-header { min-height: 48px; }
.auth-panel .auth-body { flex: 1; }

/* DaisyUI accent override for custom themes */
html[data-theme='light'], html[data-theme='white'] {
  --color-accent: oklch(85% .06 280);
  --color-accent-content: oklch(15% 0 0);
}
html[data-theme='dark'], html[data-theme='oled'] {
  --color-accent: oklch(85% .06 280);
  --color-accent-content: oklch(15% 0 0);
}

/* Safe-area padding helper for bottom-fixed UI (mobile notch) */
.pb-safe { padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 0.25rem); }
/* View Transition heavy rules moved to vt.css to load non-blocking */
